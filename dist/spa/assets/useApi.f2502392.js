import{a as l}from"./axios.37d53be1.js";import{at as f,b5 as p}from"./index.88f48d4d.js";function c(e){if(e===null||typeof e!="object")return!1;const s=Object.getPrototypeOf(e);return s!==null&&s!==Object.prototype&&Object.getPrototypeOf(s)!==null||Symbol.iterator in e?!1:Symbol.toStringTag in e?Object.prototype.toString.call(e)==="[object Module]":!0}function u(e,s,n=".",a){if(!c(s))return u(e,{},n,a);const r=Object.assign({},s);for(const t in e){if(t==="__proto__"||t==="constructor")continue;const o=e[t];o!=null&&(a&&a(r,t,o,n)||(Array.isArray(o)&&Array.isArray(r[t])?r[t]=[...o,...r[t]]:c(o)&&c(r[t])?r[t]=u(o,r[t],(n?`${n}.`:"")+t.toString(),a):r[t]=o))}return r}function b(e){return(...s)=>s.reduce((n,a)=>u(n,a,"",e),{})}const d=b(),g=async(e,s={})=>{const{g:n}=f(),a={baseURL:"https://dserver.warpoint.ru/api",headers:n.token?{Authorization:`Bearer ${n.token}`}:{}},r=d(s,a);let t=null,o=null;try{t=(await l(e,r)).data}catch(i){if(o=i,(o.response.status===403||o.response.status===401)&&(n.token=null,localStorage.removeItem("token"),window.location.reload(),window.location.reload()),o.response&&[403,404,401,500].includes(o.response.status)){const y={401:$t("\u041E\u0448\u0438\u0431\u043A\u0430 \u0434\u043E\u0441\u0442\u0443\u043F\u0430"),403:$t("\u041E\u0448\u0438\u0431\u043A\u0430 \u0434\u043E\u0441\u0442\u0443\u043F\u0430"),404:$t("\u042D\u043B\u0435\u043C\u0435\u043D\u0442 \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u044B \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D"),500:$t("\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430")};p.create({message:`${y[o.response.status]}, ${$t("\u043E\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044C \u043A \u0430\u0434\u043C\u0438\u043D\u0438\u0441\u0442\u0440\u0430\u0442\u043E\u0440\u0443")}`,color:"red",icon:"warning",position:"bottom-left",timeout:0,actions:[{icon:"close",color:"white",round:!0}]})}}return{data:t,error:o}},h=async(e,s={})=>{f();const a=d(s,{baseURL:"https://dserver.warpoint.ru/api",headers:{Authorization:"Bearer 1f2b31e917005d19e5015c9a3ec5ab5efdcaeb4b"}});let r=null,t=null;try{r=(await l(e,a)).data}catch(o){if(t=o,t.response&&[403,404,500].includes(t.response.status)){const i={403:$t("\u041E\u0448\u0438\u0431\u043A\u0430 \u0434\u043E\u0441\u0442\u0443\u043F\u0430"),404:$t("\u042D\u043B\u0435\u043C\u0435\u043D\u0442 \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u044B \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D"),500:$t("\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430")};p.create({message:`${i[t.response.status]}, ${$t("\u043E\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044C \u043A \u0430\u0434\u043C\u0438\u043D\u0438\u0441\u0442\u0440\u0430\u0442\u043E\u0440\u0443")}`,color:"red",icon:"warning",position:"bottom-left",timeout:0,actions:[{icon:"close",color:"white",round:!0}]})}}return{data:r,error:t}};export{h as a,g as u};
